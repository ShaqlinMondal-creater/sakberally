# ===============================
# Basic .htaccess Setup
# ===============================

# 1) Disable directory browsing
Options -Indexes

# 2) Security - Block sensitive files
<FilesMatch "^(composer\.(json|lock)|package\.json|yarn\.lock|\.env|\.gitignore|\.htpasswd|.*\.sql)$">
  Require all denied
</FilesMatch>

# 3) URL Rewriting - Exclude /apis and /admin folders
<IfModule mod_rewrite.c>
  RewriteEngine On

  # Skip rewrite rules for /apis and /admin directories
  RewriteRule ^(apis|admin)(/.*)?$ - [L]

  # Allow direct access to specific pages (about, contact, etc.)
  RewriteRule ^(about|contact_us|brands|inquiry_form)$ $1.php [L]

  # Allow products page with category query parameters
  RewriteRule ^products$ products.php [L]

  # Allow products page with category query parameters
  RewriteRule ^products$ products.php [L]

  # Redirect all other non-existent files to index.php (front controller)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.php [L,QSA]
</IfModule>

# 4) Compression (optional, you can remove if not needed)
<IfModule mod_deflate.c>
  SetOutputFilter DEFLATE
  AddOutputFilterByType DEFLATE text/plain text/html text/xml text/css application/javascript
</IfModule>

# 5) Caching (optional for static files)
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType font/woff2 "access plus 1 year"
</IfModule>

# 6) Prevent access to sensitive files (.env, .git, etc.)
<Files .env>
  Order allow,deny
  Deny from all
</Files>

